#config/pipelines.yaml

pipelines:
#-------------------------------------------------------------------
# Extracts oireachtas questions via API
#-------------------------------------------------------------------

#  - name: oireachtas_questions
#    type: pipelines.oireachtas_pipeline.OireachtasDataPipeline
#    params:
#      date_start: "2023-01-01"
#      date_end: "2024-12-31"
#      chunk_size: 1000

#-------------------------------------------------------------------
# Extracts boards.ie discussions via API - for politics forum
#-------------------------------------------------------------------
#  - name: boards_politics
#    type: pipelines.boards_pipeline.BoardsDataPipeline
#    params:
#      category_id: 1728 #politics-politics forum
#      limit: 100
#      date_start: "2025-01-01" #LastCommentDate
#      date_end: "2026-01-30"
#      chunk_size: 500

#-------------------------------------------------------------------
# Extracts boards.ie discussions via API - for current affairs forum
#-------------------------------------------------------------------
#  - name: boards_politics
#    type: pipelines.boards_pipeline.BoardsDataPipeline
#    params:
#      category_id: 1846 #current affairs imho forum
#      limit: 100
#      date_start: "2025-01-01" #LastCommentDate
#      date_end: "2026-01-30"
#      chunk_size: 500

#-------------------------------------------------------------------
# Extracts boards.ie comments via API - using the discussions
# API - note this is untested as yet
#-------------------------------------------------------------------

#  - name: boards_comments
#    type: pipelines.boards_comments_pipeline.BoardsCommentsPipeline
#    params:
#      discussion_source_cfg:
#        type: api
#        category_id: 1728
#      limit: 500
#      date_start: "2025-01-01"
#      date_end: "2025-12-31"
#      chunk_size: 500

#-------------------------------------------------------------------
# Extracts boards.ie comments via API - for previously stored
# discussions (dbo.boards_discussions)
#-------------------------------------------------------------------

#  - name: boards_comments_db
#    type: pipelines.boards_comments_pipeline.BoardsCommentsPipeline
#    params:
#      # Use the DB as the discussion source. The 'where' value is raw SQL applied to the table.
#      discussion_source_cfg:
#        type: db
#        table: dbo.boards_discussions
#        #where: "CategoryId = 1728 AND DateLastComment BETWEEN '2025-01-01' AND '2025-12-31'"
#      limit: 500 # limit controls the per-request page size when fetching comments from the API
#      # date_start/date_end will be passed to the comments API as the dateInserted range
#      date_start: "2025-01-01"
#      date_end: "2025-12-31"
#      chunk_size: 500 # chunk_size controls how many comments are saved to the DB at once

#-------------------------------------------------------------------
# Extracts boards.ie comments directly from the DB table dbo.boards_comments
#-------------------------------------------------------------------
#  - name: boards_comments_extract
#    type: pipelines.data_extractor_pipeline.DataExtractorPipeline
#    extractor_type: table
#    params:
#      output_csv: data/boards_comments.csv
#      extractor_params:
#        model: BoardsComment
#        filters:
#          #discussionID: 2058391856
#          dateInserted:
#            from: "2025-01-01"
#            to: "2025-12-31"
#        order_by:
#          column: dateInserted
#          direction: desc



#-------------------------------------------------------------------
# Extracts oireachtas parties via API
#-------------------------------------------------------------------
#  - name: oireachtas_parties
#    type: pipelines.oireachtas_parties_pipeline.OireachtasPartiesPipeline
#    params:
#      chamber: "dail"           # default chamber
#      house_no: 34               # default house number
#      limit: 50                  # per-request limit (configurable, default 50)
#      request_delay: 1.0         # seconds to wait between API calls
#      chunk_size: 500            # DB insert chunk size

#-------------------------------------------------------------------
# Extracts oireachtas parties from the DB table dbo.oireachtas_parties
#-------------------------------------------------------------------
#  - name: oireachtas_parties_extract
#    type: pipelines.data_extractor_pipeline.DataExtractorPipeline
#    extractor_type: table
#    params:
#      extractor_params:
#        model: OireachtasParty
#        filters:
#          # Example: limit to house_no 34 and parties observed in 2025
#          HouseNo:
#            from: 34
#            to: 34
#        order_by:
#          column: PartyShowAs
#          direction: asc

#-------------------------------------------------------------------
# Extracts oireachtas questions and answers directly from the
# DB table dbo.boards_comments
#-------------------------------------------------------------------
#
#  - name: oireachtas_questions_extract
#    type: pipelines.data_extractor_pipeline.DataExtractorPipeline
#    extractor_type: table
#    params:
#      #output_csv: data/boards_comments.csv
#      extractor_params:
#        model: OireachtasQuestion
#        filters:
#          #discussionID: 2058391856
#          QuestionDate:
#            from: "2025-01-01"
#            to: "2025-12-31"
#        order_by:
#          column: QuestionDate
#          direction: desc

#-------------------------------------------------------------------
# Extracts oireachtas members via API (normalized into relational tables)
# Extracted for two recent Dail houses (33 and 34)
#-------------------------------------------------------------------
#  - name: oireachtas_members
#    type: pipelines.oireachtas_members_pipeline.OireachtasMembersPipeline
#    params:
#      date_start: "2020-01-01"
#      date_end: "2025-12-31"
#      chamber: "dail"
#      house_no: 33
#      limit: 50
#      request_delay: 1.0
#      chunk_size: 200
#
#  - name: oireachtas_members
#    type: pipelines.oireachtas_members_pipeline.OireachtasMembersPipeline
#    params:
#      date_start: "2020-01-01"
#      date_end: "2025-12-31"
#      chamber: "dail"
#      house_no: 34
#      limit: 50
#      request_delay: 1.0
#      chunk_size: 200

#-------------------------------------------------------------------
# Extracts oireachtas members from DB tables (example extractor)
#-------------------------------------------------------------------
#  - name: oireachtas_members_extract
#    type: pipelines.data_extractor_pipeline.DataExtractorPipeline
#    extractor_type: table
#    params:
#      extractor_params:
#        model: OireachtasMember
#        filters:
#          # e.g. restrict by house or date range via joined membership table in SQL
#        order_by:
#          column: fullName
#          direction: asc
